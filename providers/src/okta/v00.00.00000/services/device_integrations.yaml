openapi: 3.0.3
info:
  title: device_integrations API
  description: okta device_integrations API
  version: 5.1.0
paths:
  /api/v1/device-integrations:
    get:
      x-okta-lifecycle:
        lifecycle: EA
        isGenerallyAvailable: false
        SKUs: []
      summary: List all device integrations
      description: >-
        Lists all device integrations for your org. Examples include Device
        Posture Provider, Windows Security Center, Chrome Device Trust, OSQuery,
        and Android Device Trust.
      operationId: listDeviceIntegrations
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DeviceIntegrations'
        '401':
          $ref: '#/components/responses/ErrorInvalidToken401'
        '403':
          $ref: '#/components/responses/ErrorAccessDenied403'
        '429':
          $ref: '#/components/responses/ErrorTooManyRequests429'
      security:
        - apiToken: []
        - oauth2:
            - okta.deviceIntegrations.read
      tags:
        - DeviceIntegrations
  /api/v1/device-integrations/{deviceIntegrationId}:
    get:
      x-okta-lifecycle:
        lifecycle: EA
        isGenerallyAvailable: false
        SKUs: []
      summary: Retrieve a device integration
      description: Retrieves a device integration by `deviceIntegrationId`
      operationId: getDeviceIntegration
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeviceIntegrations'
              examples:
                CrowdStrike:
                  $ref: '#/components/examples/DeviceIntegrationCrowdStrikeResponse'
                WindowsSecurityCenter:
                  $ref: >-
                    #/components/examples/DeviceIntegrationWindowsSecurityCenterResponse
                ChromeDeviceTrustConnector:
                  $ref: >-
                    #/components/examples/DeviceIntegrationChromeDeviceTrustConnectorResponse
                DevicePostureIdP:
                  $ref: >-
                    #/components/examples/DeviceIntegrationDevicePostureIdPResponse
                DevicePostureCheck:
                  $ref: >-
                    #/components/examples/DeviceIntegrationDevicePostureCheckResponse
                AndroidZeroTrust:
                  $ref: >-
                    #/components/examples/DeviceIntegrationAndroidZeroTrustResponse
        '401':
          $ref: '#/components/responses/ErrorInvalidToken401'
        '403':
          $ref: '#/components/responses/ErrorAccessDenied403'
        '429':
          $ref: '#/components/responses/ErrorTooManyRequests429'
      security:
        - apiToken: []
        - oauth2:
            - okta.deviceIntegrations.read
      tags:
        - DeviceIntegrations
    parameters:
      - $ref: '#/components/parameters/pathDeviceIntegrationId'
  /api/v1/device-integrations/{deviceIntegrationId}/lifecycle/activate:
    post:
      x-okta-lifecycle:
        lifecycle: EA
        isGenerallyAvailable: false
        SKUs: []
      summary: Activate a device integration
      description: >-
        Activates a device integration and populates the related configurations
        by `deviceIntegrationId`
      operationId: activateDeviceIntegration
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeviceIntegrations'
              examples:
                ChromeDeviceTrustConnector:
                  $ref: >-
                    #/components/examples/DeviceIntegrationChromeDeviceTrustConnectorResponse
                DevicePostureIdP:
                  $ref: >-
                    #/components/examples/DeviceIntegrationDevicePostureIdPResponse
                DevicePostureCheck:
                  $ref: >-
                    #/components/examples/DeviceIntegrationDevicePostureCheckResponse
                AndroidZeroTrust:
                  $ref: >-
                    #/components/examples/DeviceIntegrationAndroidZeroTrustResponse
        '401':
          $ref: '#/components/responses/ErrorInvalidToken401'
        '403':
          $ref: '#/components/responses/ErrorAccessDenied403'
        '404':
          $ref: '#/components/responses/ErrorResourceNotFound404'
        '429':
          $ref: '#/components/responses/ErrorTooManyRequests429'
      security:
        - apiToken: []
        - oauth2:
            - okta.deviceIntegrations.manage
      tags:
        - DeviceIntegrations
    parameters:
      - $ref: '#/components/parameters/pathDeviceIntegrationId'
  /api/v1/device-integrations/{deviceIntegrationId}/lifecycle/deactivate:
    post:
      x-okta-lifecycle:
        lifecycle: EA
        isGenerallyAvailable: false
        SKUs: []
      summary: Deactivate a device integration
      description: Deactivates a device integration by `deviceIntegrationId`
      operationId: deactivateDeviceIntegration
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeviceIntegrations'
              examples:
                CrowdStrike:
                  $ref: '#/components/examples/DeviceIntegrationCrowdStrikeResponse'
                WindowsSecurityCenter:
                  $ref: >-
                    #/components/examples/DeviceIntegrationWindowsSecurityCenterResponse
        '401':
          $ref: '#/components/responses/ErrorInvalidToken401'
        '403':
          $ref: '#/components/responses/ErrorAccessDenied403'
        '404':
          $ref: '#/components/responses/ErrorResourceNotFound404'
        '429':
          $ref: '#/components/responses/ErrorTooManyRequests429'
      security:
        - apiToken: []
        - oauth2:
            - okta.deviceIntegrations.manage
      tags:
        - DeviceIntegrations
    parameters:
      - $ref: '#/components/parameters/pathDeviceIntegrationId'
components:
  schemas:
    DeviceIntegrations:
      title: DeviceIntegrations
      type: object
      properties:
        displayName:
          type: string
          description: The display name of the device integration
        id:
          type: string
          readOnly: true
          description: The ID of the device integration
        metadata:
          $ref: '#/components/schemas/DeviceIntegrationsMetadata'
        name:
          $ref: '#/components/schemas/DeviceIntegrationsName'
        platform:
          $ref: '#/components/schemas/DeviceIntegrationsPlatform'
        status:
          $ref: '#/components/schemas/DeviceIntegrationsStatus'
        _links:
          $ref: '#/components/schemas/LinksSelfAndLifecycle'
    DeviceIntegrationsMetadata:
      description: The metadata of the device integration
      oneOf:
        - type: object
          properties:
            type:
              type: string
              enum:
                - CHROME
            serviceAccountName:
              type: string
            serviceAccountEmail:
              type: string
          required:
            - type
            - serviceAccountName
            - serviceAccountEmail
        - type: object
          properties:
            type:
              type: string
              enum:
                - WORKSPACE_ONE
            provider:
              type: string
            enrollmentUrl:
              type: string
            idpId:
              type: string
          required:
            - type
            - provider
            - enrollmentUrl
            - idpId
        - type: object
          properties:
            type:
              type: string
              enum:
                - DEVICE_IDP
            idpId:
              type: string
          required:
            - type
            - idpId
      type: object
    DeviceIntegrationsName:
      description: The namespace of the device integration
      type: string
      enum:
        - com.android.zero.trust
        - com.crowdstrike.zta
        - com.google.dtc
        - com.okta.device.osquery
        - com.okta.deviceidp
        - com.okta.windowssecuritycenter
        - com.okta.workspaceone
    DeviceIntegrationsPlatform:
      type: string
      enum:
        - ANDROID
        - CHROMEOS
        - IOS
        - MACOS
        - WINDOWS
    DeviceIntegrationsStatus:
      description: The status of the device integration
      type: string
      enum:
        - ACTIVE
        - DEACTIVATED
    LinksSelfAndLifecycle:
      allOf:
        - $ref: '#/components/schemas/LinksSelf'
        - type: object
          properties:
            activate:
              $ref: '#/components/schemas/HrefObjectActivateLink'
            deactivate:
              $ref: '#/components/schemas/HrefObjectDeactivateLink'
    Error:
      title: Error
      type: object
      properties:
        errorCauses:
          type: array
          items:
            $ref: '#/components/schemas/ErrorCause'
        errorCode:
          type: string
          description: An Okta code for this type of error
        errorId:
          type: string
          description: >-
            A unique identifier for this error. This can be used by Okta Support
            to help with troubleshooting.
        errorLink:
          type: string
          description: An Okta code for this type of error
        errorSummary:
          type: string
          description: >-
            A short description of what caused this error. Sometimes this
            contains dynamically-generated information about your specific
            error.
    LinksSelf:
      description: >-
        Specifies link relations (see [Web
        Linking](https://www.rfc-editor.org/rfc/rfc8288)) available using the
        [JSON Hypertext Application
        Language](https://datatracker.ietf.org/doc/html/draft-kelly-json-hal-06)
        specification. This object is used for dynamic discovery of related
        resources and lifecycle operations.
      type: object
      properties:
        self:
          $ref: '#/components/schemas/HrefObjectSelfLink'
      readOnly: true
    HrefObjectActivateLink:
      allOf:
        - $ref: '#/components/schemas/HrefObject'
        - description: Link to activate the resource
    HrefObjectDeactivateLink:
      allOf:
        - $ref: '#/components/schemas/HrefObject'
        - description: Link to deactivate the resource
    ErrorCause:
      type: object
      properties:
        errorSummary:
          type: string
    HrefObjectSelfLink:
      allOf:
        - $ref: '#/components/schemas/HrefObject'
        - description: Link to the resource (self)
    HrefObject:
      title: Link Object
      additionalProperties: true
      type: object
      properties:
        hints:
          $ref: '#/components/schemas/HrefHints'
          readOnly: true
        href:
          type: string
          description: Link URI
        name:
          type: string
          description: Link name
          readOnly: true
        templated:
          type: boolean
          description: >-
            Indicates whether the link object's `href` property is a URI
            template.
          readOnly: true
        type:
          type: string
          description: >-
            The media type of the link. If omitted, it is implicitly
            `application/json`.
          readOnly: true
      required:
        - href
    HrefHints:
      description: Describes allowed HTTP verbs for the `href`
      type: object
      properties:
        allow:
          type: array
          items:
            $ref: '#/components/schemas/HttpMethod'
    HttpMethod:
      type: string
      enum:
        - DELETE
        - GET
        - POST
        - PUT
  responses:
    ErrorInvalidToken401:
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            InvalidTokenProvided:
              $ref: '#/components/examples/ErrorInvalidTokenProvided'
    ErrorAccessDenied403:
      description: Forbidden
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            AccessDenied:
              $ref: '#/components/examples/ErrorAccessDenied'
    ErrorTooManyRequests429:
      description: Too Many Requests
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            TooManyRequests:
              $ref: '#/components/examples/ErrorTooManyRequests'
    ErrorResourceNotFound404:
      description: Not Found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            ResourceNotFound:
              $ref: '#/components/examples/ErrorResourceNotFound'
  parameters:
    pathDeviceIntegrationId:
      in: path
      name: deviceIntegrationId
      required: true
      description: The ID of the device integration
      schema:
        type: string
  examples:
    DeviceIntegrationCrowdStrikeResponse:
      summary: Response of a device integration for CrowdStrike
      value:
        id: dindyfy1f7Pv1eoVF0g4
        name: com.okta.deviceidp
        displayName: Device Posture Provider
        status: DEACTIVATED
        platform: IOS
        metadata:
          type: DEVICE_IDP
          idpId: 0oa2owlGX5l74kjr60g4
        _links:
          self:
            href: >-
              https://your-subdomain.okta.com/api/v1/device-integrations/dindyfy1f7Pv1eoVF0g4
            hints:
              allow:
                - GET
          activate:
            href: >-
              https://your-subdomain.okta.com/api/v1/device-integrations/dindyfy1f7Pv1eoVF0g4/lifecycle/activate
            hints:
              allow:
                - POST
    DeviceIntegrationWindowsSecurityCenterResponse:
      summary: Response of a device integration for Windows Security Center
      value:
        id: dinjihtR8qWZZF6qe0g4
        name: com.okta.windowssecuritycenter
        displayName: Windows Security Center
        status: DEACTIVATED
        platform: WINDOWS
        _links:
          self:
            href: >-
              https://your-subdomain.okta.com/api/v1/device-integrations/dinjihtR8qWZZF6qe0g4
            hints:
              allow:
                - GET
          activate:
            href: >-
              https://your-subdomain.okta.com/api/v1/device-integrations/dinjihtR8qWZZF6qe0g4/lifecycle/activate
            hints:
              allow:
                - POST
    DeviceIntegrationChromeDeviceTrustConnectorResponse:
      summary: Response of a device integration for Chrome Device Trust
      value:
        id: din15gaNrC7BvlBgx0g4
        name: com.google.dtc
        displayName: Chrome Device Trust
        status: ACTIVE
        platform: CHROMEOS
        metadata:
          type: CHROME
          serviceAccountName: okta-gci-00o158oxTmBNgrgyM0g4
          serviceAccountEmail: >-
            okta-gci-00o158oxTmBNgrgyM0g4@vocal-invention-346218.iam.gserviceaccount.com
        _links:
          self:
            href: >-
              https://your-subdomain.okta.com/api/v1/device-integrations/din15gaNrC7BvlBgx0g4
            hints:
              allow:
                - GET
          deactivate:
            href: >-
              https://your-subdomain.okta.com/api/v1/device-integrations/din15gaNrC7BvlBgx0g4/lifecycle/deactivate
            hints:
              allow:
                - POST
    DeviceIntegrationDevicePostureIdPResponse:
      summary: Response of a device integration for Device Posture Provider
      value:
        id: dindyfzlaerjWVdqt0g4
        name: com.okta.deviceidp
        displayName: Device Posture Provider
        status: ACTIVE
        platform: WINDOWS
        metadata:
          type: DEVICE_IDP
          idpId: 0oa2owlGX5l74kjr60g4
        _links:
          self:
            href: >-
              https://your-subdomain.okta.com/api/v1/device-integrations/dindyfzlaerjWVdqt0g4
            hints:
              allow:
                - GET
          deactivate:
            href: >-
              https://your-subdomain.okta.com/api/v1/device-integrations/dindyfzlaerjWVdqt0g4/lifecycle/deactivate
            hints:
              allow:
                - POST
    DeviceIntegrationDevicePostureCheckResponse:
      summary: Response of device integration for Device Posture Check
      value:
        id: din9lzd33mvS9vBwN1c5
        name: com.okta.device.osquery
        displayName: OSQuery
        status: ACTIVE
        platform: MACOS
        _links:
          self:
            href: >-
              https://your-subdomain.okta.com/api/v1/device-integrations/din9lzd33mvS9vBwN1c5
            hints:
              allow:
                - GET
          deactivate:
            href: >-
              https://your-subdomain.okta.com/api/v1/device-integrations/din9lzd33mvS9vBwN1c5/lifecycle/deactivate
            hints:
              allow:
                - POST
    DeviceIntegrationAndroidZeroTrustResponse:
      summary: Response of device integration for Android Device Trust
      value:
        id: din9lzd33mvS9kjr60g4
        name: com.android.zero.trust
        displayName: Android Device Trust
        status: ACTIVE
        platform: ANDROID
        _links:
          self:
            href: >-
              https://your-subdomain.okta.com/api/v1/device-integrations/din9lzd33mvS9kjr60g4
            hints:
              allow:
                - GET
          deactivate:
            href: >-
              https://your-subdomain.okta.com/api/v1/device-integrations/din9lzd33mvS9kjr60g4/lifecycle/deactivate
            hints:
              allow:
                - POST
    ErrorInvalidTokenProvided:
      summary: Invalid Token Provided
      value:
        errorCode: E0000011
        errorSummary: Invalid token provided
        errorLink: E0000011
        errorId: sampleQPivGUj_ND5v78vbYWW
        errorCauses: []
    ErrorAccessDenied:
      summary: Access Denied
      value:
        errorCode: E0000006
        errorSummary: You do not have permission to perform the requested action
        errorLink: E0000006
        errorId: sampleNUSD_8fdkFd8fs8SDBK
        errorCauses: []
    ErrorTooManyRequests:
      summary: Too Many Requests
      value:
        errorCode: E0000047
        errorSummary: API call exceeded rate limit due to too many requests.
        errorLink: E0000047
        errorId: sampleQPivGUj_ND5v78vbYWW
        errorCauses: []
    ErrorResourceNotFound:
      summary: Resource Not Found
      value:
        errorCode: E0000007
        errorSummary: 'Not found: {0}'
        errorLink: E0000007
        errorId: sampleMlLvGUj_YD5v16vkYWY
        errorCauses: []
  x-stackQL-resources:
    device_integrations:
      id: okta.device_integrations.device_integrations
      name: device_integrations
      title: Device Integrations
      methods:
        list_device_integrations:
          operation:
            $ref: '#/paths/~1api~1v1~1device-integrations/get'
          response:
            mediaType: application/json
            openAPIDocKey: '200'
        get_device_integration:
          operation:
            $ref: '#/paths/~1api~1v1~1device-integrations~1{deviceIntegrationId}/get'
          response:
            mediaType: application/json
            openAPIDocKey: '200'
        activate_device_integration:
          operation:
            $ref: >-
              #/paths/~1api~1v1~1device-integrations~1{deviceIntegrationId}~1lifecycle~1activate/post
          response:
            mediaType: application/json
            openAPIDocKey: '200'
        deactivate_device_integration:
          operation:
            $ref: >-
              #/paths/~1api~1v1~1device-integrations~1{deviceIntegrationId}~1lifecycle~1deactivate/post
          response:
            mediaType: application/json
            openAPIDocKey: '200'
      sqlVerbs:
        select:
          - $ref: >-
              #/components/x-stackQL-resources/device_integrations/methods/list_device_integrations
          - $ref: >-
              #/components/x-stackQL-resources/device_integrations/methods/get_device_integration
        insert: []
        update: []
        delete: []
        replace: []
servers:
  - url: https://{subdomain}.okta.com/
    variables:
      subdomain:
        default: my-org
        description: >-
          The domain of your organization. This can be a provided subdomain of
          an official okta domain (okta.com, oktapreview.com, etc) or one of
          your configured custom domains.
