openapi: 3.0.3
info:
  title: privileged_access API
  description: okta privileged_access API
  version: 5.1.0
paths:
  /privileged-access/api/v1/service-accounts:
    get:
      summary: List all app service accounts
      description: Lists all app service accounts
      operationId: listAppServiceAccounts
      parameters:
        - $ref: '#/components/parameters/queryLimit'
        - $ref: '#/components/parameters/queryAfter'
        - $ref: '#/components/parameters/matchQueryFilter'
      responses:
        '200':
          description: Success
          content:
            application/json:
              examples:
                ListAppServiceAccounts:
                  $ref: '#/components/examples/ListAppServiceAccounts'
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AppServiceAccount'
        '400':
          $ref: '#/components/responses/ErrorApiValidationFailed400'
        '403':
          $ref: '#/components/responses/ErrorAccessDenied403'
        '404':
          $ref: '#/components/responses/ErrorResourceNotFound404'
        '429':
          $ref: '#/components/responses/ErrorTooManyRequests429'
      security:
        - apiToken: []
        - oauth2:
            - okta.serviceAccounts.read
      tags:
        - ServiceAccount
      x-okta-lifecycle:
        lifecycle: EA
        isGenerallyAvailable: false
        SKUs: []
    post:
      summary: Create an app service account
      description: Creates a new app service account for managing an app account
      operationId: createAppServiceAccount
      x-codegen-request-body-name: body
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AppServiceAccount'
        required: true
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppServiceAccount'
        '400':
          $ref: '#/components/responses/ErrorApiValidationFailed400'
        '403':
          $ref: '#/components/responses/ErrorAccessDenied403'
        '404':
          $ref: '#/components/responses/ErrorResourceNotFound404'
        '429':
          $ref: '#/components/responses/ErrorTooManyRequests429'
      security:
        - apiToken: []
        - oauth2:
            - okta.serviceAccounts.manage
      tags:
        - ServiceAccount
      x-okta-lifecycle:
        lifecycle: EA
        isGenerallyAvailable: false
        SKUs: []
  /privileged-access/api/v1/service-accounts/{id}:
    get:
      summary: Retrieve an app service account
      description: Retrieves an app service account specified by ID
      operationId: getAppServiceAccount
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppServiceAccount'
        '400':
          $ref: '#/components/responses/ErrorApiValidationFailed400'
        '403':
          $ref: '#/components/responses/ErrorAccessDenied403'
        '404':
          $ref: '#/components/responses/ErrorResourceNotFound404'
        '429':
          $ref: '#/components/responses/ErrorTooManyRequests429'
      security:
        - apiToken: []
        - oauth2:
            - okta.serviceAccounts.read
      tags:
        - ServiceAccount
      x-okta-lifecycle:
        lifecycle: EA
        isGenerallyAvailable: false
        SKUs: []
    patch:
      summary: Update an existing app service account
      description: Updates an existing app service account specified by ID
      operationId: updateAppServiceAccount
      x-codegen-request-body-name: body
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AppServiceAccountForUpdate'
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AppServiceAccount'
        '400':
          $ref: '#/components/responses/ErrorApiValidationFailed400'
        '403':
          $ref: '#/components/responses/ErrorAccessDenied403'
        '404':
          $ref: '#/components/responses/ErrorResourceNotFound404'
        '429':
          $ref: '#/components/responses/ErrorTooManyRequests429'
      security:
        - apiToken: []
        - oauth2:
            - okta.serviceAccounts.manage
      tags:
        - ServiceAccount
      x-okta-lifecycle:
        lifecycle: EA
        isGenerallyAvailable: false
        SKUs: []
    delete:
      summary: Delete an app service account
      description: Deletes an app service account specified by ID
      operationId: deleteAppServiceAccount
      responses:
        '204':
          description: No Content
        '400':
          $ref: '#/components/responses/ErrorApiValidationFailed400'
        '403':
          $ref: '#/components/responses/ErrorAccessDenied403'
        '404':
          $ref: '#/components/responses/ErrorResourceNotFound404'
        '429':
          $ref: '#/components/responses/ErrorTooManyRequests429'
      security:
        - apiToken: []
        - oauth2:
            - okta.serviceAccounts.manage
      tags:
        - ServiceAccount
      x-okta-lifecycle:
        lifecycle: EA
        isGenerallyAvailable: false
        SKUs: []
    parameters:
      - $ref: '#/components/parameters/serviceAccountId'
components:
  schemas:
    AppServiceAccount:
      type: object
      properties:
        containerGlobalName:
          description: The key name of the app in the Okta Integration Network (OIN)
          readOnly: true
          type: string
          example: salesforce
        containerInstanceName:
          description: The app instance label
          readOnly: true
          type: string
          example: salesforce Prod 5
        containerOrn:
          description: >-
            The
            [ORN](https://developer.okta.com/docs/apihttps://developer.okta.com/docs/apihttps://developer.okta.com/docs/api/openapi/okta-management/guides/roles/#okta-resource-name-orn)
            of the relevant resource.


            Use the specific app ORN format
            (`orn:{partition}:idp:{yourOrgId}:apps:{appType}:{appId}`) to
            identify an Okta app instance in your org.
          type: string
          example: >-
            orn:okta:idp:00o1n8sbwArJ7OQRw406:apps:salesforce:0oa1gjh63g214q0Hq0g4
        created:
          type: string
          format: date-time
          description: Timestamp when the app service account was created
          readOnly: true
        description:
          description: The description of the app service account
          format: regex
          maxLength: 255
          minLength: 0
          type: string
          example: This is for accessing salesforce Prod-5
        id:
          description: The UUID of the app service account
          format: regex
          pattern: >-
            (?i)^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$
          readOnly: true
          type: string
          example: a747a818-a4c4-4446-8a87-704216495a08
        lastUpdated:
          type: string
          format: date-time
          description: Timestamp when the app service account was last updated
          readOnly: true
        name:
          description: The user-defined name for the app service account
          format: regex
          maxLength: 50
          minLength: 1
          pattern: ^[\w\-_. ]+$
          type: string
          example: salesforce Prod-5 account
        ownerGroupIds:
          description: A list of IDs of the Okta groups who own the app service account
          type: array
          items:
            type: string
          minItems: 0
          maxItems: 10
          example:
            - 00g57qp78yZT2XBA40g7
        ownerUserIds:
          description: A list of IDs of the Okta users who own the app service account
          type: array
          items:
            type: string
          minItems: 0
          maxItems: 10
          example:
            - 00u11s48P9zGW8yqm0g5
        password:
          type: string
          writeOnly: true
          description: >-
            The app service account password. Required for apps that don't have
            provisioning enabled or don't support password synchronization.
          format: password
        status:
          $ref: '#/components/schemas/ServiceAccountStatus'
        statusDetail:
          $ref: '#/components/schemas/ServiceAccountStatusDetail'
        username:
          type: string
          description: >-
            The username that serves as the direct link to your managed app
            account. Ensure that this value precisely matches the identifier of
            the target app account.
          minLength: 1
          maxLength: 100
          example: testuser-salesforce-5@example.com
      required:
        - name
        - containerOrn
        - username
    AppServiceAccountForUpdate:
      type: object
      properties:
        description:
          description: The description of the app service account
          format: regex
          maxLength: 255
          minLength: 0
          type: string
          example: This is for accessing salesforce Prod-5
        name:
          description: The user-defined name for the app service account
          format: regex
          maxLength: 50
          minLength: 1
          pattern: ^[\w\-_. ]+$
          type: string
          example: salesforce Prod-5 account
        ownerGroupIds:
          description: A list of IDs of the Okta groups who own the app service account
          type: array
          items:
            type: string
          minItems: 0
          maxItems: 10
          example:
            - 00g57qp78yZT2XBA40g7
        ownerUserIds:
          description: A list of IDs of the Okta users who own the app service account
          type: array
          items:
            type: string
          minItems: 0
          maxItems: 10
          example:
            - 00u11s48P9zGW8yqm0g5
    ServiceAccountStatus:
      description: Describes the current status of an app service account
      example: UNSECURED
      type: string
      enum:
        - ALERT
        - ERROR
        - INFO
        - NO_ISSUES
        - UNSECURED
      x-enumDescriptions:
        NO_ISSUES: The account is ready for use in Okta Privileged Access
        UNSECURED: >-
          The account needs to be assigned to a resource group and a project in
          Okta Privileged Access
        INFO: >-
          An action involving the account is in progress in Okta Privileged
          Access
        ALERT: The account requires attention from an admin
        ERROR: An error is preventing Okta Privileged Access from using the account
      readOnly: true
    ServiceAccountStatusDetail:
      description: Describes the detailed status of an app service account
      example: STAGED
      type: string
      enum:
        - CREATION_FAILED
        - MISSING_PASSWORD
        - PENDING
        - ROTATED
        - ROTATING
        - ROTATION_FAILED
        - STAGED
        - VAULTED
      x-enumDescriptions:
        PENDING: The account is being created
        CREATION_FAILED: The account can't be created
        STAGED: The account is in the Okta Privileged Access resource assignment area
        ROTATING: >-
          The account is assigned to a project in Okta Privileged Access.
          Credentials are currently being synced using Okta Lifecycle
          Management.
        ROTATED: >-
          The account is assigned to a project in Okta Privileged Access.
          Password rotations are fulfilled by Okta Lifecycle Management.
        ROTATION_FAILED: >-
          The account is assigned to a project in Okta Privileged Access. An
          error occurred while using Okta Lifecycle Management to rotate the
          password.
        VAULTED: >-
          The account is assigned to a project in Okta Privileged Access. A
          manually managed password is assigned to the account.
        MISSING_PASSWORD: >-
          The account is assigned to a project in Okta Privileged Access. A
          password isn't assigned to the account.
      readOnly: true
    Error:
      title: Error
      type: object
      properties:
        errorCauses:
          type: array
          items:
            $ref: '#/components/schemas/ErrorCause'
        errorCode:
          type: string
          description: An Okta code for this type of error
        errorId:
          type: string
          description: >-
            A unique identifier for this error. This can be used by Okta Support
            to help with troubleshooting.
        errorLink:
          type: string
          description: An Okta code for this type of error
        errorSummary:
          type: string
          description: >-
            A short description of what caused this error. Sometimes this
            contains dynamically-generated information about your specific
            error.
    ErrorCause:
      type: object
      properties:
        errorSummary:
          type: string
  responses:
    ErrorApiValidationFailed400:
      description: Bad Request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            APIValidationFailed:
              $ref: '#/components/examples/ErrorApiValidationFailed'
    ErrorAccessDenied403:
      description: Forbidden
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            AccessDenied:
              $ref: '#/components/examples/ErrorAccessDenied'
    ErrorResourceNotFound404:
      description: Not Found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            ResourceNotFound:
              $ref: '#/components/examples/ErrorResourceNotFound'
    ErrorTooManyRequests429:
      description: Too Many Requests
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            TooManyRequests:
              $ref: '#/components/examples/ErrorTooManyRequests'
  parameters:
    queryLimit:
      name: limit
      in: query
      schema:
        type: integer
        minimum: 1
        maximum: 200
        default: 20
      description: A limit on the number of objects to return
    queryAfter:
      name: after
      in: query
      schema:
        type: string
      description: >-
        The cursor to use for pagination. It is an opaque string that specifies
        your current location in the list and is obtained from the `Link`
        response header. See
        [Pagination](https://developer.okta.com/docs/api/#pagination).
    matchQueryFilter:
      name: match
      description: >-
        Searches for app service accounts where the account name (`name`),
        username (`username`), app instance label (`containerInstanceName`), or
        OIN app key name (`containerGlobalName`) contains the given value
      in: query
      required: false
      schema:
        type: string
        minLength: 3
        maxLength: 255
        example: salesforce
    serviceAccountId:
      name: id
      in: path
      description: ID of an existing service account
      required: true
      schema:
        type: string
  examples:
    ListAppServiceAccounts:
      value:
        - id: a747a818-a4c4-4446-8a87-704216495a08
          name: salesforce Prod-1 account
          description: This is for accessing salesforce Prod-1
          username: testuser-salesforce-1@example.com
          containerOrn: >-
            orn:okta:idp:00o1n8sbwArJ7OQRw406:apps:salesforce:0oa1gjh63g214q0Hq0g4
          containerInstanceName: salesforce-1
          containerGlobalName: salesforce
          ownerGroupIds:
            - 00g57qp78yZT2XBA40g7
          ownerUserIds:
            - 00u11s48P9zGW8yqm0g5
          status: NO_ISSUES
          statusDetail: ROTATED
          created: '2024-04-04T15:56:05.000Z'
          lastUpdated: '2024-04-05T18:15:44.000Z'
        - id: a747a818-a4c4-4446-8a87-704216495a09
          name: salesforce Prod-5 account
          description: This is for accessing salesforce Prod-5
          username: testuser-salesforce-5@example.com
          containerOrn: >-
            orn:okta:idp:00o1n8sbwArJ7OQRw406:apps:salesforce:0oa1gjh63g214q0Hq0g4
          containerInstanceName: salesforce-5
          containerGlobalName: salesforce
          ownerGroupIds:
            - 00g57qp78yZT2XBA40g7
          ownerUserIds:
            - 00u11s48P9zGW8yqm0g5
          status: NO_ISSUES
          statusDetail: ROTATED
          created: '2024-04-04T15:56:05.000Z'
          lastUpdated: '2024-04-05T18:15:44.000Z'
      summary: List app service accounts
    ErrorApiValidationFailed:
      summary: API Validation Failed
      value:
        errorCode: E0000001
        errorSummary: 'Api validation failed: {0}'
        errorLink: E0000001
        errorId: sampleiCF-8D5rLW6myqiPItW
        errorCauses: []
    ErrorAccessDenied:
      summary: Access Denied
      value:
        errorCode: E0000006
        errorSummary: You do not have permission to perform the requested action
        errorLink: E0000006
        errorId: sampleNUSD_8fdkFd8fs8SDBK
        errorCauses: []
    ErrorResourceNotFound:
      summary: Resource Not Found
      value:
        errorCode: E0000007
        errorSummary: 'Not found: {0}'
        errorLink: E0000007
        errorId: sampleMlLvGUj_YD5v16vkYWY
        errorCauses: []
    ErrorTooManyRequests:
      summary: Too Many Requests
      value:
        errorCode: E0000047
        errorSummary: API call exceeded rate limit due to too many requests.
        errorLink: E0000047
        errorId: sampleQPivGUj_ND5v78vbYWW
        errorCauses: []
  x-stackQL-resources:
    service_accounts:
      id: okta.privileged_access.service_accounts
      name: service_accounts
      title: Service Accounts
      methods:
        list_app_service_accounts:
          operation:
            $ref: '#/paths/~1privileged-access~1api~1v1~1service-accounts/get'
          response:
            mediaType: application/json
            openAPIDocKey: '200'
        create_app_service_account:
          operation:
            $ref: '#/paths/~1privileged-access~1api~1v1~1service-accounts/post'
          response:
            mediaType: application/json
            openAPIDocKey: '200'
        get_app_service_account:
          operation:
            $ref: '#/paths/~1privileged-access~1api~1v1~1service-accounts~1{id}/get'
          response:
            mediaType: application/json
            openAPIDocKey: '200'
        update_app_service_account:
          operation:
            $ref: '#/paths/~1privileged-access~1api~1v1~1service-accounts~1{id}/patch'
          response:
            mediaType: application/json
            openAPIDocKey: '200'
        delete_app_service_account:
          operation:
            $ref: >-
              #/paths/~1privileged-access~1api~1v1~1service-accounts~1{id}/delete
          response:
            mediaType: ''
            openAPIDocKey: '204'
      sqlVerbs:
        select:
          - $ref: >-
              #/components/x-stackQL-resources/service_accounts/methods/list_app_service_accounts
          - $ref: >-
              #/components/x-stackQL-resources/service_accounts/methods/get_app_service_account
        insert:
          - $ref: >-
              #/components/x-stackQL-resources/service_accounts/methods/create_app_service_account
        update:
          - $ref: >-
              #/components/x-stackQL-resources/service_accounts/methods/update_app_service_account
        delete:
          - $ref: >-
              #/components/x-stackQL-resources/service_accounts/methods/delete_app_service_account
        replace: []
servers:
  - url: https://{subdomain}.okta.com/
    variables:
      subdomain:
        default: my-org
        description: >-
          The domain of your organization. This can be a provided subdomain of
          an official okta domain (okta.com, oktapreview.com, etc) or one of
          your configured custom domains.
